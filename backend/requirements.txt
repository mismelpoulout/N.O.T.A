# ---------------- Core API ----------------
fastapi==0.111.0
uvicorn==0.30.1
pydantic==2.7.1
httpx==0.27.0
python-dotenv==1.0.1
aiosqlite==0.21.0

# ---------------- HTML / scraping ----------------
beautifulsoup4==4.12.3
readability-lxml==0.8.1
trafilatura==1.12.1
lxml_html_clean==0.4.3

# ---------------- NumPy (fijado para Py3.12) ----------------
# Mantener <2.0 para compatibilidad amplia en 3.12 y wheels precompilados
numpy==1.26.4

# ---------------- PDFs (ingesta de libros) ----------------
# Usaremos PyMuPDF si hay wheel compatible (en 3.12 ok). Si falla, caemos a pypdf.
PyMuPDF==1.24.10; python_version < "3.13"
pypdf==4.3.1
tqdm==4.66.5

# ---------------- Optimización opcional (no obligatorias) ----------------
# Acelera JSON en prod si el wheel está disponible (evita compilar en Mac ARM locales)
orjson==3.10.7 ; platform_system != "Windows"
# Event loop rápido en Linux (Render usa Linux); en macOS local no es necesario
uvloop==0.20.0 ; platform_system == "Linux"

# ---------------- Embeddings (opcional) ----------------
# Si quieres fastembed en 3.12, usa una versión previa que NO pida numpy>=2.
# Descomentarlo sólo si lo necesitas y en 3.12 (en 3.13 pide numpy>=2.1 y chocará).
# fastembed==0.4.1

# Alternativas (pesadas) — desaconsejado en free tiers:
# sentence-transformers==2.7.0
# torch==2.3.1

# ---------------- Gemini (opcional, si luego lo conectas) ----------------
# google-generativeai==0.8.3